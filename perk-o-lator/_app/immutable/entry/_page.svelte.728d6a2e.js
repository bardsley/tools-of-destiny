import{S as ke,i as we,s as be,k as P,q as w,a as z,l as E,m as S,r as b,h as m,c as R,n as I,b as O,H as u,K as Pe,u as G,I as oe,j as Ie,y as ye,z as Se,p as ce,A as je,g as Ne,d as De,L as Ee,B as He,M as Oe,J as ge,N as Ce,O as Ve}from"../chunks/index.aaf1d7ba.js";import{w as Ae}from"../chunks/index.49e5f27a.js";function Te(i){let s,n,c,t,a,f,e,p,N,y,j,h,d;return{c(){s=P("div"),n=w(i[3]),c=w(" / "),t=w(i[1]),a=z(),f=P("textarea"),p=P("br"),N=z(),y=P("button"),j=w("Copy to Clipboard"),this.h()},l(r){s=E(r,"DIV",{});var l=S(s);n=b(l,i[3]),c=b(l," / "),t=b(l,i[1]),l.forEach(m),a=R(r),f=E(r,"TEXTAREA",{id:!0,class:!0}),S(f).forEach(m),p=E(r,"BR",{}),N=R(r),y=E(r,"BUTTON",{});var _=S(y);j=b(_,"Copy to Clipboard"),_.forEach(m),this.h()},h(){I(f,"id","wish-wall"),f.value=e="// "+i[0]+` - perks from perk-o-lator https://destiny.tools\r
`+i[2].join(`
`)+`\r
`,I(f,"class","svelte-l75kop")},m(r,l){O(r,s,l),u(s,n),u(s,c),u(s,t),O(r,a,l),O(r,f,l),O(r,p,l),O(r,N,l),O(r,y,l),u(y,j),h||(d=Pe(y,"click",i[4]),h=!0)},p(r,[l]){l&8&&G(n,r[3]),l&2&&G(t,r[1]),l&5&&e!==(e="// "+r[0]+` - perks from perk-o-lator https://destiny.tools\r
`+r[2].join(`
`)+`\r
`)&&(f.value=e)},i:oe,o:oe,d(r){r&&m(s),r&&m(a),r&&m(f),r&&m(p),r&&m(N),r&&m(y),h=!1,d()}}}function Z(i){return i.every(s=>s<1)}function Je(i,s,n){let c,{selectedPerks:t=[]}=s,{itemID:a=0}=s,{itemName:f=""}=s,e=new Array(t.length).fill(0),p=[],N=(h,d)=>`dimwishlist:item=${h}&perks=${t[0][d[0]]},${t[1][d[1]]},${t[2][d[2]]},${t[3][d[3]]}`,y=()=>{let h=document.getElementById("wish-wall");h.select(),h.setSelectionRange(0,99999),navigator.clipboard.writeText(h.value),alert("Copied the text: "+copyText.value)};Ie(()=>{if(n(2,p=[]),console.log("Updated Wishlist"),console.log(!Z(e),j),console.log("Start State",Z(e),e),c)console.log("Not enough options");else{for(;!Z(e)&&j<1e3;)console.log(e),n(2,p=[...p,N(a,e)]),e[0]>0?n(1,e[0]-=1,e):(n(1,e[0]=t[0].length-1,e),e[1]>0?n(1,e[1]-=1,e):(n(1,e[1]=t[1].length-1,e),e[2]>0?n(1,e[2]-=1,e):(n(1,e[2]=t[2].length-1,e),e[3]>0?n(1,e[3]-=1,e):n(1,e[3]=t[3].length-1,e)))),j+=1,console.log("After maths",Z(e),e);console.log("FInal State",Z(e),e),n(2,p=[...p,N(a,e)])}j=0});let j=0;return i.$$set=h=>{"selectedPerks"in h&&n(5,t=h.selectedPerks),"itemID"in h&&n(6,a=h.itemID),"itemName"in h&&n(0,f=h.itemName)},i.$$.update=()=>{i.$$.dirty&32&&t.forEach((h,d)=>{console.log(h,d),n(1,e[d]=h.length-1,e)}),i.$$.dirty&32&&n(3,c=t.some(h=>h.length<1))},[f,e,p,c,y,t,a]}class ze extends ke{constructor(s){super(),we(this,s,Je,Te,be,{selectedPerks:5,itemID:6,itemName:0})}}function pe(i,s,n){const c=i.slice();return c[11]=s[n],c[13]=n,c}function de(i,s,n){const c=i.slice();return c[14]=s[n],c}function _e(i){let s,n,c;return{c(){s=P("a"),this.h()},l(t){s=E(t,"A",{"data-perkid":!0,"data-colid":!0,class:!0,style:!0}),S(s).forEach(m),this.h()},h(){I(s,"data-perkid",i[14].id),I(s,"data-colid",i[13]),I(s,"class","perk svelte-1a7xwjs"),ce(s,"background-image","url('https://www.bungie.net"+i[14].icon+"')")},m(t,a){O(t,s,a),n||(c=Pe(s,"click",Ve(i[6])),n=!0)},p:oe,d(t){t&&m(s),n=!1,c()}}}function ve(i){let s,n,c=i[11],t=[];for(let a=0;a<c.length;a+=1)t[a]=_e(de(i,c,a));return{c(){s=P("div");for(let a=0;a<t.length;a+=1)t[a].c();n=z(),this.h()},l(a){s=E(a,"DIV",{class:!0});var f=S(s);for(let e=0;e<t.length;e+=1)t[e].l(f);n=R(f),f.forEach(m),this.h()},h(){I(s,"class","perkCol svelte-1a7xwjs")},m(a,f){O(a,s,f);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(s,null);u(s,n)},p(a,f){if(f&96){c=a[11];let e;for(e=0;e<c.length;e+=1){const p=de(a,c,e);t[e]?t[e].p(p,f):(t[e]=_e(p),t[e].c(),t[e].m(s,n))}for(;e<t.length;e+=1)t[e].d(1);t.length=c.length}},d(a){a&&m(s),Ee(t,a)}}}function Re(i){let s,n,c,t,a,f,e=i[1].version+"",p,N,y=Object.keys(i[1].items).length+"",j,h,d,r,l,_,D,A,L,F,H,K,B,se,M,U,le,Q=JSON.stringify(i[0],null,4)+"",x,ne,W,ae,Y=JSON.stringify(i[0],null,4)+"",$,re,T,X=i[5],v=[];for(let o=0;o<X.length;o+=1)v[o]=ve(pe(i,X,o));return U=new ze({props:{selectedPerks:i[0],itemID:V,itemName:i[4]}}),{c(){s=P("nav"),n=P("h1"),c=w("Perk-o-later"),t=z(),a=P("p"),f=w("Using D2 APi version "),p=w(e),N=w(" containing "),j=w(y),h=w(" items"),d=z(),r=P("div"),l=P("h2"),_=w(i[4]),D=z(),A=P("span"),L=w(V),F=z(),H=P("div"),K=P("div"),B=P("div");for(let o=0;o<v.length;o+=1)v[o].c();se=z(),M=P("div"),ye(U.$$.fragment),le=w(`
    
    Selected `),x=w(Q),ne=z(),W=P("pre"),ae=w("        "),$=w(Y),re=w(`

    `),this.h()},l(o){s=E(o,"NAV",{class:!0});var k=S(s);n=E(k,"H1",{class:!0});var C=S(n);c=b(C,"Perk-o-later"),C.forEach(m),t=R(k),a=E(k,"P",{class:!0});var J=S(a);f=b(J,"Using D2 APi version "),p=b(J,e),N=b(J," containing "),j=b(J,y),h=b(J," items"),J.forEach(m),k.forEach(m),d=R(o),r=E(o,"DIV",{class:!0,style:!0});var g=S(r);l=E(g,"H2",{class:!0});var q=S(l);_=b(q,i[4]),D=R(q),A=E(q,"SPAN",{class:!0});var ue=S(A);L=b(ue,V),ue.forEach(m),q.forEach(m),F=R(g),H=E(g,"DIV",{class:!0});var ee=S(H);K=E(ee,"DIV",{class:!0});var fe=S(K);B=E(fe,"DIV",{class:!0});var he=S(B);for(let ie=0;ie<v.length;ie+=1)v[ie].l(he);he.forEach(m),fe.forEach(m),se=R(ee),M=E(ee,"DIV",{class:!0});var me=S(M);Se(U.$$.fragment,me),me.forEach(m),ee.forEach(m),le=b(g,`
    
    Selected `),x=b(g,Q),ne=R(g),W=E(g,"PRE",{class:!0});var te=S(W);ae=b(te,"        "),$=b(te,Y),re=b(te,`

    `),te.forEach(m),g.forEach(m),this.h()},h(){var o;I(n,"class","svelte-1a7xwjs"),I(a,"class","svelte-1a7xwjs"),I(s,"class","svelte-1a7xwjs"),I(A,"class","svelte-1a7xwjs"),I(l,"class","svelte-1a7xwjs"),I(B,"class","perks svelte-1a7xwjs"),I(K,"class","selector svelte-1a7xwjs"),I(M,"class","cut-n-paste svelte-1a7xwjs"),I(H,"class","columns svelte-1a7xwjs"),I(W,"class","svelte-1a7xwjs"),I(r,"class","item svelte-1a7xwjs"),ce(r,"background-image","url('https://www.bungie.net"+((o=i[1].items[V])==null?void 0:o.screenshot)+"')")},m(o,k){O(o,s,k),u(s,n),u(n,c),u(s,t),u(s,a),u(a,f),u(a,p),u(a,N),u(a,j),u(a,h),O(o,d,k),O(o,r,k),u(r,l),u(l,_),u(l,D),u(l,A),u(A,L),u(r,F),u(r,H),u(H,K),u(K,B);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(B,null);u(H,se),u(H,M),je(U,M,null),u(r,le),u(r,x),u(r,ne),u(r,W),u(W,ae),u(W,$),u(W,re),T=!0},p(o,[k]){var J;if((!T||k&2)&&e!==(e=o[1].version+"")&&G(p,e),(!T||k&2)&&y!==(y=Object.keys(o[1].items).length+"")&&G(j,y),k&96){X=o[5];let g;for(g=0;g<X.length;g+=1){const q=pe(o,X,g);v[g]?v[g].p(q,k):(v[g]=ve(q),v[g].c(),v[g].m(B,null))}for(;g<v.length;g+=1)v[g].d(1);v.length=X.length}const C={};k&1&&(C.selectedPerks=o[0]),U.$set(C),(!T||k&1)&&Q!==(Q=JSON.stringify(o[0],null,4)+"")&&G(x,Q),(!T||k&1)&&Y!==(Y=JSON.stringify(o[0],null,4)+"")&&G($,Y),(!T||k&2)&&ce(r,"background-image","url('https://www.bungie.net"+((J=o[1].items[V])==null?void 0:J.screenshot)+"')")},i(o){T||(Ne(U.$$.fragment,o),T=!0)},o(o){De(U.$$.fragment,o),T=!1},d(o){o&&m(s),o&&m(d),o&&m(r),Ee(v,o),He(U)}}}const V="3110377595";function Ue(i,s,n){var d,r;let c,t;const a=Oe("manifest");ge(i,a,l=>n(1,t=l));const f=Ae([[],[],[],[]]);ge(i,f,l=>n(0,c=l));const e=(r=(d=t.items[V])==null?void 0:d.displayProperties)==null?void 0:r.name,N=[t.plugsets[t.items[V].sockets.socketEntries[1].randomizedPlugSetHash].reusablePlugItems.map(function(l){return l.plugItemHash}),t.plugsets[t.items[V].sockets.socketEntries[2].randomizedPlugSetHash].reusablePlugItems.map(function(l){return l.plugItemHash}),t.plugsets[t.items[V].sockets.socketEntries[3].randomizedPlugSetHash].reusablePlugItems.map(function(l){return l.plugItemHash}),t.plugsets[t.items[V].sockets.socketEntries[4].randomizedPlugSetHash].reusablePlugItems.map(function(l){return l.plugItemHash})].map(function(l){return l.map(function(_){var D,A,L,F,H;return{id:_,name:(A=(D=t.items[_])==null?void 0:D.displayProperties)==null?void 0:A.name,icon:(H=(F=(L=t.items[_])==null?void 0:L.displayProperties)==null?void 0:F.iconSequences[1])==null?void 0:H.frames[0]}})});JSON.stringify(N,null,4);const j=(l,_)=>(console.log(l,_),l.includes(_)?l.filter(D=>D!=_):[...l,_]);function h(l){let _=l.target.dataset.perkid,D=l.target.dataset.colid;console.log(_,D),l.target.classList.toggle("selected"),Ce(f,c[D]=j(c[D],l.target.dataset.perkid),c)}return[c,t,a,f,e,N,h]}class qe extends ke{constructor(s){super(),we(this,s,Ue,Re,be,{})}}export{qe as default};
